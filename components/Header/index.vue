<template>
  <header class="header">
    <div class="container">
      <div class="header__wrapper">
        <button class="header__menuBtn">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <img src="../../assets/img/logo.svg" class="header__logo" />
        <nav class="nav header__nav">
          <ul class="nav__list">
            <li class="nav__item">
              <a href="#" class="nav__link">Меню</a>
              <ul class="dropdown nav__dropdown">
                <li class="dropdown__item" v-for="(category, index) in categories" :key="index">
                  <router-link :to="{ name: 'menu', params: { category }}" class="dropdown__link">
                    <svg
                      width="22"
                      height="13"
                      viewBox="0 0 22 13"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M21.8926 5.94051C20.9845 4.18043 19.6123 2.69609 17.9243 1.64785C16.1883 0.569825 14.1843 0 12.1289 0C9.35445 0 6.74404 1.01558 4.71622 2.87199C3.78258 1.54041 2.31299 0.651944 0.683437 0.458648L0.287912 0.411735L0.187111 0.795642C0.0629494 1.2685 0 1.75762 0 2.24951C0 3.69751 0.555116 5.09363 1.53707 6.14875C0.555116 7.20386 0 8.59998 0 10.048C0 10.5399 0.0629494 11.029 0.187065 11.5018L0.287866 11.8857L0.683391 11.8388C2.31294 11.6455 3.78254 10.7571 4.71617 9.42546C6.74399 11.2819 9.3544 12.2974 12.1289 12.2974C14.1843 12.2974 16.1883 11.7276 17.9242 10.6496C19.6123 9.6014 20.9844 8.11701 21.8925 6.35694L22 6.1487L21.8926 5.94051ZM12.1289 11.3865C9.40894 11.3865 6.86102 10.3217 4.95439 8.3881L4.52577 7.95341L4.22867 8.48603C3.54276 9.71572 2.3497 10.5844 0.984104 10.8677C0.937749 10.5979 0.914297 10.3235 0.914297 10.048C0.914297 8.69572 1.48998 7.39716 2.49375 6.48533L2.86422 6.14875L2.49375 5.81216C1.48998 4.90033 0.914297 3.60182 0.914297 2.24951C0.914297 1.97401 0.937749 1.69964 0.984104 1.42978C2.3497 1.71307 3.54276 2.58173 4.22867 3.81147L4.52577 4.34408L4.95439 3.90939C6.86102 1.97583 9.40894 0.910964 12.1289 0.910964C15.8378 0.910964 19.2033 2.91166 20.9689 6.14875C19.2033 9.38583 15.8378 11.3865 12.1289 11.3865Z"
                        fill="#333333"
                      />
                      <path
                        d="M12.5831 2.73291H11.6688V9.56481H12.5831V2.73291Z"
                        fill="#333333"
                      />
                      <path
                        d="M9.8402 3.198H8.9259V9.09916H9.8402V3.198Z"
                        fill="#333333"
                      />
                      <path
                        d="M15.326 3.19727H14.4117V9.10034H15.326V3.19727Z"
                        fill="#333333"
                      />
                      <path
                        d="M18.0688 5.23779C17.5647 5.23779 17.1545 5.64643 17.1545 6.14871C17.1545 6.65099 17.5647 7.05963 18.0688 7.05963C18.573 7.05963 18.9831 6.65099 18.9831 6.14871C18.9831 5.64643 18.573 5.23779 18.0688 5.23779Z"
                        fill="#333333"
                      />
                      <path
                        d="M7.0974 4.82373H6.18311V7.47396H7.0974V4.82373Z"
                        fill="#333333"
                      />
                    </svg>
                    {{category}}
                  </router-link>
                </li>
              </ul>
            </li>
            <li class="nav__item">
              <router-link to="delivery" class="nav__link">Доставка</router-link>
            </li>
            <li class="nav__item">
              <router-link to="payment" class="nav__link">Оплата</router-link>
            </li>
            <li class="nav__item">
              <a href="#" class="nav__link">Бронь стола</a>
            </li>
          </ul>
        </nav>
        <a href="tel:+79999999999" class="header-phone header__phone">
          <div class="header-phone__icon">
            <svg
              width="15"
              height="15"
              viewBox="0 0 15 15"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M3.67508 1.83341C2.65933 1.83341 1.83341 2.65933 1.83341 3.67508C1.83341 8.90825 6.09121 13.1667 11.3251 13.1667C12.3401 13.1667 13.1667 12.3408 13.1667 11.3251C13.1667 11.2465 13.1618 11.1692 13.1519 11.0927L9.87937 10.3419C9.81421 10.4666 9.74267 10.6019 9.6775 10.728C9.3545 11.3442 9.12075 11.7919 8.52433 11.5517C6.18258 10.7301 4.27079 8.81758 3.4385 6.4475C3.18562 5.89146 3.66729 5.63929 4.27787 5.32054C4.40183 5.25537 4.53571 5.18525 4.65825 5.1215L3.90741 1.84829C3.82879 1.83837 3.75229 1.83341 3.67508 1.83341ZM11.3251 14.5834C5.30992 14.5834 0.416748 9.69025 0.416748 3.67508C0.416748 1.87804 1.87804 0.416748 3.67508 0.416748C3.85925 0.416748 4.04129 0.432331 4.21766 0.46279C4.38979 0.490415 4.56262 0.534331 4.73121 0.592415C4.96141 0.672456 5.13496 0.865831 5.1895 1.10383L6.15921 5.32833C6.21304 5.56067 6.14575 5.80433 5.98 5.97716C5.88367 6.07775 5.88154 6.07987 5.00321 6.53958C5.71437 8.0795 6.95042 9.31129 8.45917 9.99837C8.91958 9.11933 8.92241 9.1165 9.023 9.02017C9.19583 8.85441 9.44092 8.78996 9.67183 8.84096L13.897 9.81067C14.1343 9.86521 14.3277 10.038 14.407 10.2682C14.4651 10.4354 14.509 10.6082 14.5381 10.786C14.5678 10.961 14.5834 11.1423 14.5834 11.3251C14.5834 13.1221 13.1214 14.5834 11.3251 14.5834Z"
              />
            </svg>
          </div>
          <div class="header-phone__text">+7 (999) 999-99-99</div>
        </a>
        <button class="header__login" v-if="!auth" @click="$emit('openLogin')">
          <svg
            width="19"
            height="25"
            viewBox="0 0 19 25"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12.0833 6.04172C12.0833 4.61701 10.9247 3.45839 9.49994 3.45839C8.07524 3.45839 6.91661 4.61701 6.91661 6.04172C6.91661 7.46643 8.07524 8.62506 9.49994 8.62506C10.9247 8.62506 12.0833 7.46643 12.0833 6.04172ZM14.6666 6.04167C14.6666 8.89109 12.3494 11.2083 9.49998 11.2083C6.65056 11.2083 4.33331 8.89109 4.33331 6.04167C4.33331 3.19225 6.65056 0.875 9.49998 0.875C12.3494 0.875 14.6666 3.19225 14.6666 6.04167ZM0.458313 22.8333C0.458313 17.8474 4.51544 13.7916 9.49998 13.7916C14.4845 13.7916 18.5416 17.8474 18.5416 22.8333C18.5416 23.5463 17.9643 24.1249 17.25 24.1249C16.5357 24.1249 15.9583 23.5463 15.9583 22.8333C15.9583 19.2722 13.0611 16.3749 9.49998 16.3749C5.93886 16.3749 3.04165 19.2722 3.04165 22.8333C3.04165 23.5463 2.46427 24.1249 1.74998 24.1249C1.03569 24.1249 0.458313 23.5463 0.458313 22.8333Z"
            />
          </svg>
        </button>
        <div class="user header__user" v-else></div>
        <button class="header__basket" v-if="!auth">
          <span class="round">{{ basket.basket.length }}</span>
          <svg
            width="32"
            height="31"
            viewBox="0 0 32 31"
            xmlns="http://www.w3.org/2000/svg"
          >
            <mask
              id="mask0"
              mask-type="alpha"
              maskUnits="userSpaceOnUse"
              x="3"
              y="3"
              width="26"
              height="25"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M21.9111 18.0165H12.0711L9.95669 10.2951H25.7861L21.9111 18.0165ZM27.9819 8.94126C27.5079 8.17684 26.6864 7.72128 25.7848 7.72128H9.25149L8.45453 4.80904C8.30082 4.24924 7.79061 3.8606 7.20807 3.8606H4.62474C3.91044 3.8606 3.33307 4.43712 3.33307 5.14749C3.33307 5.85786 3.91044 6.43439 4.62474 6.43439H6.22124L9.83661 19.6418C9.99032 20.2016 10.5005 20.5902 11.0831 20.5902H22.7081C23.1976 20.5902 23.6445 20.3148 23.8641 19.8786L28.0956 11.4456C28.4999 10.6412 28.456 9.70567 27.9819 8.94126ZM10.4375 23.164C9.36801 23.164 8.50001 24.0275 8.50001 25.0944C8.50001 26.1612 9.36801 27.0247 10.4375 27.0247C11.507 27.0247 12.375 26.1612 12.375 25.0944C12.375 24.0275 11.507 23.164 10.4375 23.164ZM21.4166 25.0944C21.4166 24.0275 22.2846 23.164 23.3541 23.164C24.4236 23.164 25.2916 24.0275 25.2916 25.0944C25.2916 26.1612 24.4236 27.0247 23.3541 27.0247C22.2846 27.0247 21.4166 26.1612 21.4166 25.0944Z"
              />
            </mask>
            <g mask="url(#mask0)">
              <rect x="0.75" width="31" height="30.8855" />
            </g>
          </svg>
        </button>
      </div>
    </div>
  </header>
</template>

<script>
import "./style.scss";
import { mapState } from "vuex";
export default {
  data: () => ({
    auth: false,
    categories: [
      'Супы',
      'Хачапури',
      'Мясное',
      'Мясное',
      'Мясное',
      'Мясное',
    ]
  }),
  computed: {
    ...mapState(["basket"]),
  },
  mounted() {
    if (this.$store.state.basket.basket.length === 0) {
      this.$store.commit("basket/getBasket");
    }
  },
};
</script>
